<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 53 WHERE | Data Management</title>
  <meta name="description" content="You’ll learn how to get data, get it into the most useful structure, transform it, visualize it and model it. In this course, you will find a practicum of skills for data science. You’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualizing and exploring data. This is a three-credit hour course." />
  <meta name="generator" content="bookdown 0.21.6 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 53 WHERE | Data Management" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="You’ll learn how to get data, get it into the most useful structure, transform it, visualize it and model it. In this course, you will find a practicum of skills for data science. You’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualizing and exploring data. This is a three-credit hour course." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 53 WHERE | Data Management" />
  
  <meta name="twitter:description" content="You’ll learn how to get data, get it into the most useful structure, transform it, visualize it and model it. In this course, you will find a practicum of skills for data science. You’ll learn how to clean data and draw plots—and many other things besides. These are the skills that allow data science to happen, and here you will find the best practices for doing each of these things. You’ll learn how to use the grammar of graphics, literate programming, and reproducible research to save time. You’ll also learn how to manage cognitive resources to facilitate discoveries when wrangling, visualizing and exploring data. This is a three-credit hour course." />
  

<meta name="author" content="Markum Reed" />


<meta name="date" content="2021-01-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="select.html"/>
<link rel="next" href="group-by-and-order-by.html"/>
<script src="libs/header-attrs-2.6.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

true

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Management</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="where" class="section level1" number="53">
<h1><span class="header-section-number">Section 53</span> WHERE</h1>
<p>Over the next few weeks, we will be adding more functionalities to the SELECT statement. A very common task when working with data is filtering for records based on criteria, which can be done with a WHERE statement.</p>
<p>We will be learning more functions and using them in the WHERE clause, but we can also use them in SELECT statements, as discussed in the previous chapter. For the most part, expressions and functions can be used in any part of a SQL statement.</p>
<div id="filtering-records" class="section level2" number="53.1">
<h2><span class="header-section-number">53.1</span> Filtering Records</h2>
<div class="sourceCode" id="cb973"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb973-1"><a href="where.html#cb973-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb973-2"><a href="where.html#cb973-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb974"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb974-1"><a href="where.html#cb974-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb974-2"><a href="where.html#cb974-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb974-3"><a href="where.html#cb974-3" aria-hidden="true" tabindex="-1"></a>WHERE year <span class="op">=</span> <span class="dv">2010</span><span class="op">;</span></span></code></pre></div>
<p>Conversely, you can use != or &lt;&gt; to get everything but 2010.</p>
<div class="sourceCode" id="cb975"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb975-1"><a href="where.html#cb975-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb975-2"><a href="where.html#cb975-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb975-3"><a href="where.html#cb975-3" aria-hidden="true" tabindex="-1"></a>WHERE year <span class="op">!=</span> <span class="dv">2010</span><span class="op">;</span></span></code></pre></div>
<p>We can also qualify inclusive ranges using a BETWEEN statement:</p>
<div class="sourceCode" id="cb976"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb976-1"><a href="where.html#cb976-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb976-2"><a href="where.html#cb976-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb976-3"><a href="where.html#cb976-3" aria-hidden="true" tabindex="-1"></a>WHERE year BETWEEN <span class="dv">2005</span> AND <span class="dv">2010</span><span class="op">;</span></span></code></pre></div>
</div>
<div id="and-or-and-in-statements" class="section level2" number="53.2">
<h2><span class="header-section-number">53.2</span> AND, OR, and IN Statements</h2>
<p>A BETWEEN can alternatively be expressed using greater than or equal to and less than or equal to expressions and an AND statement.</p>
<div class="sourceCode" id="cb977"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb977-1"><a href="where.html#cb977-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb977-2"><a href="where.html#cb977-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data </span>
<span id="cb977-3"><a href="where.html#cb977-3" aria-hidden="true" tabindex="-1"></a>WHERE year <span class="op">&gt;=</span> <span class="dv">2005</span> AND year <span class="op">&lt;=</span> <span class="dv">2010</span><span class="op">;</span></span></code></pre></div>
<p>If we wanted everything between 2005 and 2010 exclusively — i.e., not including those two years — we would just get rid of the = characters. Only 2006, 2007, 2008, and 2009 would then qualify:</p>
<div class="sourceCode" id="cb978"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb978-1"><a href="where.html#cb978-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb978-2"><a href="where.html#cb978-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb978-3"><a href="where.html#cb978-3" aria-hidden="true" tabindex="-1"></a>WHERE year <span class="op">&gt;</span> <span class="dv">2005</span> AND year <span class="op">&lt;</span> <span class="dv">2010</span><span class="op">;</span></span></code></pre></div>
<p>We also have the option of using OR. In an OR statement, at least one of the criteria must be true for the record to qualify. If we wanted only records with months 3, 6, 9, or 12, we could use an OR to accomplish that:</p>
<div class="sourceCode" id="cb979"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb979-1"><a href="where.html#cb979-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb979-2"><a href="where.html#cb979-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb979-3"><a href="where.html#cb979-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data </span>
<span id="cb979-4"><a href="where.html#cb979-4" aria-hidden="true" tabindex="-1"></a>WHERE MONTH <span class="op">=</span> <span class="dv">3</span> </span>
<span id="cb979-5"><a href="where.html#cb979-5" aria-hidden="true" tabindex="-1"></a>OR MONTH <span class="op">=</span> <span class="dv">6</span> </span>
<span id="cb979-6"><a href="where.html#cb979-6" aria-hidden="true" tabindex="-1"></a>OR MONTH <span class="op">=</span> <span class="dv">9</span> </span>
<span id="cb979-7"><a href="where.html#cb979-7" aria-hidden="true" tabindex="-1"></a>OR MONTH <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span></code></pre></div>
<p>A more effient way is to use the IN statement.</p>
<div class="sourceCode" id="cb980"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb980-1"><a href="where.html#cb980-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb980-2"><a href="where.html#cb980-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb980-3"><a href="where.html#cb980-3" aria-hidden="true" tabindex="-1"></a>WHERE MONTH IN (<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>)<span class="op">;</span></span></code></pre></div>
<p>If we want everything except 3,6,9,12, we use the NOT IN:</p>
<div class="sourceCode" id="cb981"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb981-1"><a href="where.html#cb981-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb981-2"><a href="where.html#cb981-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb981-3"><a href="where.html#cb981-3" aria-hidden="true" tabindex="-1"></a>WHERE MONTH NOT IN (<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>)<span class="op">;</span></span></code></pre></div>
<p>We could also leverage some logic:</p>
<div class="sourceCode" id="cb982"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb982-1"><a href="where.html#cb982-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb982-2"><a href="where.html#cb982-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb982-3"><a href="where.html#cb982-3" aria-hidden="true" tabindex="-1"></a>WHERE MONTH <span class="op">%</span> <span class="dv">3</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
</div>
<div id="using-where-on-text" class="section level2" number="53.3">
<h2><span class="header-section-number">53.3</span> Using Where on Text</h2>
<p>The rules for qualifying text fields follow the same structure, although there are subtle differences. You can use =, AND, OR, and IN statements with text. However, when using text, you must wrap literals (or text values you specify) in single quotes. For example, if you wanted to filter for a specific report_code, you could run this query:</p>
<div class="sourceCode" id="cb983"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb983-1"><a href="where.html#cb983-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb983-2"><a href="where.html#cb983-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb983-3"><a href="where.html#cb983-3" aria-hidden="true" tabindex="-1"></a>WHERE report_code <span class="op">=</span> <span class="st">&#39;513A63&#39;</span><span class="op">;</span></span></code></pre></div>
<pre><code> * sqlite:///oreilly_getting_started_with_sql/weather_stations.db
Done.</code></pre>
<table>
<tr>
<th>
station_number
</th>
<th>
report_code
</th>
<th>
year
</th>
<th>
month
</th>
<th>
day
</th>
<th>
dew_point
</th>
<th>
station_pressure
</th>
<th>
visibility
</th>
<th>
wind_speed
</th>
<th>
temperature
</th>
<th>
precipitation
</th>
<th>
snow_depth
</th>
<th>
fog
</th>
<th>
rain
</th>
<th>
hail
</th>
<th>
thunder
</th>
<th>
tornado
</th>
</tr>
<tr>
<td>
702223
</td>
<td>
513A63
</td>
<td>
2010
</td>
<td>
1
</td>
<td>
22
</td>
<td>
-23.1
</td>
<td>
None
</td>
<td>
10
</td>
<td>
0.8
</td>
<td>
-15.6
</td>
<td>
0
</td>
<td>
None
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
</table>
<p>This single-quote rule applies to all text operations, including this IN operation:</p>
<div class="sourceCode" id="cb985"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb985-1"><a href="where.html#cb985-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb985-2"><a href="where.html#cb985-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data </span>
<span id="cb985-3"><a href="where.html#cb985-3" aria-hidden="true" tabindex="-1"></a>WHERE report_code IN (<span class="st">&#39;513A63&#39;</span>,<span class="st">&#39;1F8A7B&#39;</span>,<span class="st">&#39;EF616A&#39;</span>)<span class="op">;</span></span></code></pre></div>
<pre><code> * sqlite:///oreilly_getting_started_with_sql/weather_stations.db
Done.</code></pre>
<table>
<tr>
<th>
station_number
</th>
<th>
report_code
</th>
<th>
year
</th>
<th>
month
</th>
<th>
day
</th>
<th>
dew_point
</th>
<th>
station_pressure
</th>
<th>
visibility
</th>
<th>
wind_speed
</th>
<th>
temperature
</th>
<th>
precipitation
</th>
<th>
snow_depth
</th>
<th>
fog
</th>
<th>
rain
</th>
<th>
hail
</th>
<th>
thunder
</th>
<th>
tornado
</th>
</tr>
<tr>
<td>
470160
</td>
<td>
EF616A
</td>
<td>
1967
</td>
<td>
7
</td>
<td>
29
</td>
<td>
65.6
</td>
<td>
None
</td>
<td>
9.2
</td>
<td>
1.2
</td>
<td>
72.4
</td>
<td>
0.04
</td>
<td>
None
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
821930
</td>
<td>
1F8A7B
</td>
<td>
1953
</td>
<td>
6
</td>
<td>
18
</td>
<td>
72.8
</td>
<td>
1007.1
</td>
<td>
12.4
</td>
<td>
3.6
</td>
<td>
81.3
</td>
<td>
0
</td>
<td>
None
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<td>
702223
</td>
<td>
513A63
</td>
<td>
2010
</td>
<td>
1
</td>
<td>
22
</td>
<td>
-23.1
</td>
<td>
None
</td>
<td>
10
</td>
<td>
0.8
</td>
<td>
-15.6
</td>
<td>
0
</td>
<td>
None
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
</table>
<p>The length function will count the number of characters for a given value:</p>
<div class="sourceCode" id="cb987"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb987-1"><a href="where.html#cb987-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb987-2"><a href="where.html#cb987-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb987-3"><a href="where.html#cb987-3" aria-hidden="true" tabindex="-1"></a>WHERE length(report_code) <span class="op">!=</span> <span class="dv">6</span><span class="op">;</span></span></code></pre></div>
<pre><code> * sqlite:///oreilly_getting_started_with_sql/weather_stations.db
Done.</code></pre>
<table>
<tr>
<th>
station_number
</th>
<th>
report_code
</th>
<th>
year
</th>
<th>
month
</th>
<th>
day
</th>
<th>
dew_point
</th>
<th>
station_pressure
</th>
<th>
visibility
</th>
<th>
wind_speed
</th>
<th>
temperature
</th>
<th>
precipitation
</th>
<th>
snow_depth
</th>
<th>
fog
</th>
<th>
rain
</th>
<th>
hail
</th>
<th>
thunder
</th>
<th>
tornado
</th>
</tr>
</table>
<p>Another common operation is to use wildcards with a LIKE expression, where % is any number of characters and _ is any single character. Any other character is interpreted literally. So, if you wanted to find all report codes that start with the letter “A,” you would run this statement to find “A” followed by any characters:</p>
<div class="sourceCode" id="cb989"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb989-1"><a href="where.html#cb989-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb989-2"><a href="where.html#cb989-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-3"><a href="where.html#cb989-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb989-4"><a href="where.html#cb989-4" aria-hidden="true" tabindex="-1"></a>WHERE report_code LIKE <span class="st">&#39;A%&#39;</span><span class="op">;</span></span></code></pre></div>
<p>If you wanted to find all report codes that have a “B” as the first character and a “C” as the third character, you would specify an underscore (_) for the second position, and follow with any number of characters after the “C”:</p>
<div class="sourceCode" id="cb990"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb990-1"><a href="where.html#cb990-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb990-2"><a href="where.html#cb990-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb990-3"><a href="where.html#cb990-3" aria-hidden="true" tabindex="-1"></a>WHERE report_code LIKE <span class="st">&#39;B_C%&#39;</span></span></code></pre></div>
</div>
<div id="where-on-booleans" class="section level2" number="53.4">
<h2><span class="header-section-number">53.4</span> WHERE on Booleans</h2>
<div class="sourceCode" id="cb991"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb991-1"><a href="where.html#cb991-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb991-2"><a href="where.html#cb991-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-3"><a href="where.html#cb991-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb991-4"><a href="where.html#cb991-4" aria-hidden="true" tabindex="-1"></a>WHERE tornado <span class="op">=</span> <span class="dv">1</span> AND hail <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span></code></pre></div>
<p>SQLite only supports using 1 for true and 0 for false.</p>
<div class="sourceCode" id="cb992"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb992-1"><a href="where.html#cb992-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb992-2"><a href="where.html#cb992-2" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FRPM station_data</span>
<span id="cb992-3"><a href="where.html#cb992-3" aria-hidden="true" tabindex="-1"></a>WHERE tornado <span class="op">=</span><span class="dv">0</span> AND hail <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span></code></pre></div>
</div>
<div id="handling-null" class="section level2" number="53.5">
<h2><span class="header-section-number">53.5</span> Handling NULL</h2>
<p>Some columns such as <code>station_pressure</code> and <code>snow_depth</code>, have <em>null</em> values. A null is a value that has no value. It is the complete absence of any content.</p>
<div class="sourceCode" id="cb993"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb993-1"><a href="where.html#cb993-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb993-2"><a href="where.html#cb993-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb993-3"><a href="where.html#cb993-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb993-4"><a href="where.html#cb993-4" aria-hidden="true" tabindex="-1"></a>WHERE snow_depth IS NULL<span class="op">;</span></span></code></pre></div>
<p>Nulls can be hard to handle when composing WHERE statements. I fyou wanted to query all records where `precipitation is less than 0.5, you could write:</p>
<div class="sourceCode" id="cb994"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb994-1"><a href="where.html#cb994-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb994-2"><a href="where.html#cb994-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb994-3"><a href="where.html#cb994-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb994-4"><a href="where.html#cb994-4" aria-hidden="true" tabindex="-1"></a>WHERE precipitation <span class="op">&lt;=</span> <span class="fl">0.5</span><span class="op">;</span></span></code></pre></div>
<p>But you must consider the null values. If you wanted the nulls to be included you need to use an OR statment.</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb995-1"><a href="where.html#cb995-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb995-2"><a href="where.html#cb995-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb995-3"><a href="where.html#cb995-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb995-4"><a href="where.html#cb995-4" aria-hidden="true" tabindex="-1"></a>WHERE precipitation IS NULL OR precipitation <span class="op">&lt;=</span> <span class="fl">0.5</span><span class="op">;</span></span></code></pre></div>
<p>A more elegant way is to use <code>coalesce()</code>. If you wanted nulls to be treated as 0 within our condition, we could <code>coalesce()</code> the precipitation field to convert null to 0:</p>
<div class="sourceCode" id="cb996"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb996-1"><a href="where.html#cb996-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb996-2"><a href="where.html#cb996-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb996-3"><a href="where.html#cb996-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb996-4"><a href="where.html#cb996-4" aria-hidden="true" tabindex="-1"></a>WHERE coalesce(precipitation, <span class="dv">0</span>) <span class="op">&lt;=</span> <span class="fl">0.5</span><span class="op">;</span></span></code></pre></div>
</div>
<div id="grouping-conditions" class="section level2" number="53.6">
<h2><span class="header-section-number">53.6</span> Grouping Conditions</h2>
<p>When chaining AND and OR together, it is good to group them.</p>
<p>Make sure that you organize each set of conditions between each OR in a way that groups related conditions.</p>
<div class="sourceCode" id="cb997"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb997-1"><a href="where.html#cb997-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb997-2"><a href="where.html#cb997-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb997-3"><a href="where.html#cb997-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb997-4"><a href="where.html#cb997-4" aria-hidden="true" tabindex="-1"></a>WHERE rain <span class="op">=</span> <span class="dv">1</span> AND temperature <span class="op">&lt;=</span><span class="dv">32</span></span>
<span id="cb997-5"><a href="where.html#cb997-5" aria-hidden="true" tabindex="-1"></a>OR snow_depth<span class="op">&gt;</span><span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<p>While this technically works, there is a degree of ambiguity.</p>
<div class="sourceCode" id="cb998"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb998-1"><a href="where.html#cb998-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>sql</span>
<span id="cb998-2"><a href="where.html#cb998-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb998-3"><a href="where.html#cb998-3" aria-hidden="true" tabindex="-1"></a>SELECT <span class="op">*</span> FROM station_data</span>
<span id="cb998-4"><a href="where.html#cb998-4" aria-hidden="true" tabindex="-1"></a>WHERE (rain<span class="op">=</span><span class="dv">1</span> AND temperature <span class="op">&lt;=</span><span class="dv">32</span>)</span>
<span id="cb998-5"><a href="where.html#cb998-5" aria-hidden="true" tabindex="-1"></a>OR snow_depth <span class="op">&gt;</span><span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<p>Here we group the expression within paretheses so it is calculated as a single unit, and temperature is not mixed up with the OR operator and accidentally mangled with the snow_depth.</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>

<div id="preamble" class="section level3" number="53.6.1">
<h3><span class="header-section-number">53.6.1</span> PREAMBLE</h3>
<pre><code>#!pip install ipython-sql
!git clone https://github.com/thomasnield/oreilly_getting_started_with_sql.git
%load_ext sql
%sql sqlite:///oreilly_getting_started_with_sql/weather_stations.db</code></pre>
<pre><code>Cloning into &#39;oreilly_getting_started_with_sql&#39;...
remote: Enumerating objects: 3, done.[K
remote: Counting objects: 100% (3/3), done.[K
remote: Compressing objects: 100% (3/3), done.[K
remote: Total 60 (delta 0), reused 0 (delta 0), pack-reused 57[K
Unpacking objects: 100% (60/60), done.





&#39;Connected: @oreilly_getting_started_with_sql/weather_stations.db&#39;</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="select.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="group-by-and-order-by.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data_management.pdf", "data_management.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
